pipeline {
    agent any
    environment {
        IMAGE_NAME = "ahmed0130/todo-app:2.0-snapshot-${BUILD_NUMBER}"
        EC2_INSTANCE_IP = '13.53.187.202'
        LINODE_INSTANCE_IP='172.104.252.70'
    }
    stages {
        stage('Test') {
            steps {
                script {
                    sh """
                        virtualenv venv
                        . .env/bin/activate
                        pip install -r requirements/preinstall.txt
                        python manage.py migrate 
                        pytest
                        """
                }
            }
        }
   
    }
}
